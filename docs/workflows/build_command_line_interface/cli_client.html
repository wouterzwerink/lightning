


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="google-site-verification" content="okUst94cAlWSsUsGZTB4xSS4UKTtRV8Nu5XZ9pdd3Aw" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2. Develop a CLI with server and client code execution &mdash; lightning 0.7.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/icon.svg"/>
  
  
  
    <link rel="canonical" href="https://github.com/Lightning-AI/lightning/workflows/build_command_line_interface/cli_client.html"/>
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!-- <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" /> -->
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/togglebutton.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/main.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/sphinx_paramlinks.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
  <!-- Google Analytics -->
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-D3Q2ESCTZR"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-D3Q2ESCTZR');
    </script>
  
  <!-- End Google Analytics -->
  

  
  <script src="../../_static/js/modernizr.min.js"></script>

  <!-- Preload the theme fonts -->

<link rel="preload" href="../../_static/fonts/FreightSans/freight-sans-book.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="../../_static/fonts/FreightSans/freight-sans-medium.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="../../_static/fonts/IBMPlexMono/IBMPlexMono-Medium.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="../../_static/fonts/FreightSans/freight-sans-bold.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="../../_static/fonts/FreightSans/freight-sans-medium-italic.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="../../_static/fonts/IBMPlexMono/IBMPlexMono-SemiBold.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="../../_static/fonts/UCity/UCity-Light.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="../../_static/fonts/UCity/UCity-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="../../_static/fonts/UCity/UCity-Semibold.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="../../_static/fonts/Inconsolata/Inconsolata.woff2" as="font" type="font/woff2" crossorigin="anonymous">

<!-- Preload the katex fonts -->

<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Math-Italic.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Main-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Main-Bold.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Size1-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Size4-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Size2-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Size3-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Caligraphic-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <script defer src="https://use.fontawesome.com/releases/v6.1.1/js/all.js" integrity="sha384-xBXmu0dk1bEoiwd71wOonQLyH+VpgR1XcDH3rtxrLww5ajNTuMvBdL5SOiFZnNdp" crossorigin="anonymous"></script>
</head>

<div id="lightning-ai-header"></div>

<body class="pytorch-body">

   

    

    <div class="table-of-contents-link-wrapper">
      <span>Table of Contents</span>
      <a href="#" class="toggle-table-of-contents" data-behavior="toggle-table-of-contents"></a>
    </div>

    <nav data-toggle="wy-nav-shift" class="pytorch-left-menu" id="pytorch-left-menu">
      <div class="pytorch-side-scroll">
        <div class="pytorch-menu pytorch-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          <div class="pytorch-left-menu-search">
            

            
              
              
                <div class="version">
                  0.7.0
                </div>
              
            

            


  


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search Docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

            
          </div>

          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Home</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Welcome to ⚡ Lightning Apps</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Get Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../get_started/lightning_apps_intro.html">Lightning Apps in 15 minutes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">App Building Skills</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../levels/basic/index.html">Basic skills</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../levels/intermediate/index.html">Intermediate skills</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../levels/advanced/index.html">Advanced skills</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../examples/dag/dag.html">Develop a DAG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/file_server/file_server.html">Develop a File Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/github_repo_runner/github_repo_runner.html">Develop a Github Repo Script Runner</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/hpo/hpo.html">Develop a HPO Sweeper</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/model_server_app/model_server_app.html">Develop a Model Server</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">How to...</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../access_app_state/access_app_state.html">Access the App State</a></li>
<li class="toctree-l1"><a class="reference internal" href="../add_web_ui/index.html">Add a web user interface (UI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../add_web_link.html">Add a web link</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary/secrets.html">Add encrypted secrets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../arrange_tabs/index.html">Arrange app tabs</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html">Develop a Command Line Interface (CLI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../build_lightning_app/index.html">Develop a Lightning App</a></li>
<li class="toctree-l1"><a class="reference internal" href="../build_lightning_component/index.html">Develop a Lightning Component</a></li>
<li class="toctree-l1"><a class="reference internal" href="../build_rest_api/index.html">Develop a REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../run_work_once.html">Cache Work run calls</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core_api/lightning_work/compute.html">Customize your cloud compute</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extend_app.html">Extend an existing app</a></li>
<li class="toctree-l1"><a class="reference internal" href="../build_lightning_component/publish_a_component.html">Publish a Lightning component</a></li>
<li class="toctree-l1"><a class="reference internal" href="../add_server/index.html">Run a server within a Lightning App</a></li>
<li class="toctree-l1"><a class="reference internal" href="../run_app_on_cloud/index.html">Run an App on the cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../byoc/index.html">Run Apps on your cloud account (BYOC)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../run_work_in_parallel.html">Run work in parallel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary/storage/drive.html">Save files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../share_app.html">Share an app</a></li>
<li class="toctree-l1"><a class="reference internal" href="../share_files_between_components.html">Share files between components</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Core API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../core_api/lightning_app/index.html">LightningApp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core_api/lightning_flow.html">LightningFlow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core_api/lightning_work/index.html">LightningWork</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Addons API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api_reference/components.html">lightning_app.components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api_reference/frontend.html">lightning_app.frontend</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api_reference/runners.html">lightning_app.runners</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api_reference/storage.html">lightning_app.storage</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Glossary</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../glossary/app_tree.html">App Components Tree</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary/build_config/build_config.html">Build Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary/command_lines/command_lines.html">Command Line Interface (CLI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary/dag.html">DAG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary/event_loop.html">Event Loop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary/environment_variables.html">Environment Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary/secrets.html">Encrypted Secrets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../add_web_ui/glossary_front_end.html">Frontend</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary/ios_and_android.html">Apple and Android mobile devices with Lighting Apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary/restful_api/restful_api.html">REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary/sharing_components.html">Sharing Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary/scheduling.html">Scheduling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary/storage/storage.html">Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../add_web_ui/glossary_ui.html">UI</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <div class="pytorch-container">
      <div class="pytorch-page-level-bar" id="pytorch-page-level-bar">
        <div class="pytorch-breadcrumbs-wrapper">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="pytorch-breadcrumbs">
    
      <li>
        <a href="../../index.html">
          
            Docs
          
        </a> &gt;
      </li>

        
      <li>2. Develop a CLI with server and client code execution</li>
    
    
      <li class="pytorch-breadcrumbs-aside">
        
            
            <a href="../../_sources/workflows/build_command_line_interface/cli_client.rst.txt" rel="nofollow"><img src="../../_static/images/view-page-source-icon.svg"></a>
          
        
      </li>
    
  </ul>

  
</div>
        </div>

        <div class="pytorch-shortcuts-wrapper" id="pytorch-shortcuts-wrapper">
          Shortcuts
        </div>
      </div>

      <section data-toggle="wy-nav-shift" id="pytorch-content-wrap" class="pytorch-content-wrap">
        <div class="pytorch-content-left">

        
          
          <div class="rst-content">
          
            <div role="main" class="main-content" itemscope="itemscope" itemtype="http://schema.org/Article">
             <article itemprop="articleBody" id="pytorch-article" class="pytorch-article">
              
  <section id="develop-a-cli-with-server-and-client-code-execution">
<h1>2. Develop a CLI with server and client code execution<a class="headerlink" href="#develop-a-cli-with-server-and-client-code-execution" title="Permalink to this headline">¶</a></h1>
<p>We’ve learned how to create a simple command-line interface. But in real-world use-cases, an App Builder wants to provide more complex functionalities where trusted code is executed on the client side.</p>
<p>Lightning provides a flexible way to create complex CLI without much effort.</p>
<p>In this example, we’ll create a CLI to dynamically run Notebooks:</p>
<hr class="docutils" />
<section id="implement-a-complex-cli">
<h2>1. Implement a complex CLI<a class="headerlink" href="#implement-a-complex-cli" title="Permalink to this headline">¶</a></h2>
<p>First of all, lets’ create the following file structure:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">app_folder</span><span class="o">/</span>
    <span class="n">commands</span><span class="o">/</span>
        <span class="n">notebook</span><span class="o">/</span>
            <span class="n">run</span><span class="o">.</span><span class="n">py</span>
    <span class="n">app</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>We’ll use the <a class="reference external" href="https://github.com/Lightning-AI/LAI-Jupyter-Component">Jupyter-Component</a>. Follow the installation steps on the repo to install the Component.</p>
<p>Add the following code to <code class="docutils literal notranslate"><span class="pre">commands/notebook/run.py</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">argparse</span> <span class="kn">import</span> <span class="n">ArgumentParser</span>
<span class="kn">from</span> <span class="nn">uuid</span> <span class="kn">import</span> <span class="n">uuid4</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>

<span class="kn">from</span> <span class="nn">lightning.app.utilities.commands</span> <span class="kn">import</span> <span class="n">ClientCommand</span>


<span class="k">class</span> <span class="nc">RunNotebookConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">cloud_compute</span><span class="p">:</span> <span class="nb">str</span>


<span class="k">class</span> <span class="nc">RunNotebook</span><span class="p">(</span><span class="n">ClientCommand</span><span class="p">):</span>

    <span class="n">DESCRIPTION</span> <span class="o">=</span> <span class="s2">&quot;Run a Notebook.&quot;</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># 1. Define your own argument parser. You can use argparse, click, etc...</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;Run Notebook Parser&#39;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--name&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--cloud_compute&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;cpu&quot;</span><span class="p">)</span>
        <span class="n">hparams</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>

        <span class="c1"># 2. Invoke the server side handler by sending a payload.</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">invoke_handler</span><span class="p">(</span>
            <span class="n">config</span><span class="o">=</span><span class="n">RunNotebookConfig</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="n">hparams</span><span class="o">.</span><span class="n">name</span> <span class="ow">or</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid4</span><span class="p">()),</span>
                <span class="n">cloud_compute</span><span class="o">=</span><span class="n">hparams</span><span class="o">.</span><span class="n">cloud_compute</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">)</span>

        <span class="c1"># 3. Print the server response.</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>
</div>
<p>Add the following code to <code class="docutils literal notranslate"><span class="pre">app.py</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">commands.notebook.run</span> <span class="kn">import</span> <span class="n">RunNotebook</span><span class="p">,</span> <span class="n">RunNotebookConfig</span>
<span class="kn">from</span> <span class="nn">lit_jupyter</span> <span class="kn">import</span> <span class="n">JupyterLab</span>

<span class="kn">import</span> <span class="nn">lightning</span> <span class="k">as</span> <span class="nn">L</span>
<span class="kn">from</span> <span class="nn">lightning.app.structures</span> <span class="kn">import</span> <span class="n">Dict</span>


<span class="k">class</span> <span class="nc">Flow</span><span class="p">(</span><span class="n">L</span><span class="o">.</span><span class="n">LightningFlow</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notebooks</span> <span class="o">=</span> <span class="n">Dict</span><span class="p">()</span>

    <span class="c1"># 1. Annotates the handler input with the Notebook config.</span>
    <span class="k">def</span> <span class="nf">run_notebook</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">RunNotebookConfig</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">notebooks</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;The Notebook </span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> already exists.&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># 2. Dynamically creates the Notebook if it doesn&#39;t exist and runs it.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">notebooks</span><span class="p">[</span><span class="n">config</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">JupyterLab</span><span class="p">(</span>
                <span class="n">cloud_compute</span><span class="o">=</span><span class="n">L</span><span class="o">.</span><span class="n">CloudCompute</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">cloud_compute</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">notebooks</span><span class="p">[</span><span class="n">config</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;The Notebook </span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> was created.&quot;</span>

    <span class="k">def</span> <span class="nf">configure_commands</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># 3. Returns a list of dictionaries with the format:</span>
        <span class="c1"># {&quot;command_name&quot;: CustomClientCommand(method=self.custom_server_handler)}</span>
        <span class="k">return</span> <span class="p">[{</span><span class="s2">&quot;run notebook&quot;</span><span class="p">:</span> <span class="n">RunNotebook</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">run_notebook</span><span class="p">)}]</span>

    <span class="k">def</span> <span class="nf">configure_layout</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># 4. Dynamically displays the Notebooks in the Lightning App View.</span>
        <span class="k">return</span> <span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">n</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">w</span><span class="p">}</span> <span class="k">for</span> <span class="n">n</span><span class="p">,</span> <span class="n">w</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">notebooks</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>


<span class="n">app</span> <span class="o">=</span> <span class="n">L</span><span class="o">.</span><span class="n">LightningApp</span><span class="p">(</span><span class="n">Flow</span><span class="p">())</span>
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="run-the-app-and-check-the-api-documentation">
<h2>2. Run the App and check the API documentation<a class="headerlink" href="#run-the-app-and-check-the-api-documentation" title="Permalink to this headline">¶</a></h2>
<p>In a terminal, run the following command and open <code class="docutils literal notranslate"><span class="pre">http://127.0.0.1:7501/docs</span></code> in a browser.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">lightning</span> <span class="n">run</span> <span class="n">app</span> <span class="n">app</span><span class="o">.</span><span class="n">py</span>
<span class="n">Your</span> <span class="n">Lightning</span> <span class="n">App</span> <span class="ow">is</span> <span class="n">starting</span><span class="o">.</span> <span class="n">This</span> <span class="n">won</span><span class="s1">&#39;t take long.</span>
<span class="n">INFO</span><span class="p">:</span> <span class="n">Your</span> <span class="n">app</span> <span class="n">has</span> <span class="n">started</span><span class="o">.</span> <span class="n">View</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">your</span> <span class="n">browser</span><span class="p">:</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">127.0.0.1</span><span class="p">:</span><span class="mi">7501</span><span class="o">/</span><span class="n">view</span>
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="connect-to-a-running-app">
<h2>3. Connect to a running App<a class="headerlink" href="#connect-to-a-running-app" title="Permalink to this headline">¶</a></h2>
<p>In another terminal, connect to the running App.
When you connect to an App, the Lightning CLI is replaced by the App CLI. To exit the App CLI, you need to run <code class="docutils literal notranslate"><span class="pre">lightning</span> <span class="pre">disconnect</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>lightning connect localhost

Storing `run_notebook` under /Users/thomas/.lightning/lightning_connection/commands/run_notebook.py
You can review all the downloaded commands under /Users/thomas/.lightning/lightning_connection/commands folder.
You are connected to the local Lightning App.
</pre></div>
</div>
<p>To see a list of available commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">lightning</span> <span class="o">--</span><span class="n">help</span>

<span class="n">You</span> <span class="n">are</span> <span class="n">connected</span> <span class="n">to</span> <span class="n">the</span> <span class="n">cloud</span> <span class="n">Lightning</span> <span class="n">App</span><span class="p">:</span> <span class="n">localhost</span><span class="o">.</span>
<span class="n">Usage</span><span class="p">:</span> <span class="n">lightning</span> <span class="p">[</span><span class="n">OPTIONS</span><span class="p">]</span> <span class="n">COMMAND</span> <span class="p">[</span><span class="n">ARGS</span><span class="p">]</span><span class="o">...</span>

<span class="o">--</span><span class="n">help</span>     <span class="n">Show</span> <span class="n">this</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">exit</span><span class="o">.</span>

<span class="n">Lightning</span> <span class="n">App</span> <span class="n">Commands</span>
    <span class="n">run</span> <span class="n">notebook</span> <span class="n">Run</span> <span class="n">a</span> <span class="n">Notebook</span><span class="o">.</span>
</pre></div>
</div>
<p>To find the arguments of the commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">lightning</span> <span class="n">run</span> <span class="n">notebook</span> <span class="o">--</span><span class="n">help</span>

<span class="n">You</span> <span class="n">are</span> <span class="n">connected</span> <span class="n">to</span> <span class="n">the</span> <span class="n">cloud</span> <span class="n">Lightning</span> <span class="n">App</span><span class="p">:</span> <span class="n">localhost</span><span class="o">.</span>
<span class="n">usage</span><span class="p">:</span> <span class="n">notebook</span> <span class="p">[</span><span class="o">-</span><span class="n">h</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">name</span> <span class="n">NAME</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">cloud_compute</span> <span class="n">CLOUD_COMPUTE</span><span class="p">]</span>

<span class="n">Run</span> <span class="n">Notebook</span> <span class="n">Parser</span>

<span class="n">optional</span> <span class="n">arguments</span><span class="p">:</span>
    <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>            <span class="n">show</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">exit</span>
    <span class="o">--</span><span class="n">name</span> <span class="n">NAME</span>
    <span class="o">--</span><span class="n">cloud_compute</span> <span class="n">CLOUD_COMPUTE</span>
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="execute-a-command">
<h2>4. Execute a command<a class="headerlink" href="#execute-a-command" title="Permalink to this headline">¶</a></h2>
<p>And then you can trigger the command-line exposed by your App.</p>
<p>Run the first Notebook with the following command:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">lightning</span> <span class="n">run</span> <span class="n">notebook</span> <span class="o">--</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;my_notebook&quot;</span>
<span class="n">WARNING</span><span class="p">:</span> <span class="n">Lightning</span> <span class="n">Command</span> <span class="n">Line</span> <span class="n">Interface</span> <span class="ow">is</span> <span class="n">an</span> <span class="n">experimental</span> <span class="n">feature</span> <span class="ow">and</span> <span class="n">unannounced</span> <span class="n">changes</span> <span class="n">are</span> <span class="n">likely</span><span class="o">.</span>
<span class="n">The</span> <span class="n">notebook</span> <span class="n">my_notebook</span> <span class="n">was</span> <span class="n">created</span><span class="o">.</span>
</pre></div>
</div>
<p>And run a second notebook.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">lightning</span> <span class="n">run</span> <span class="n">notebook</span> <span class="o">--</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;my_notebook_2&quot;</span>
<span class="n">WARNING</span><span class="p">:</span> <span class="n">Lightning</span> <span class="n">Command</span> <span class="n">Line</span> <span class="n">Interface</span> <span class="ow">is</span> <span class="n">an</span> <span class="n">experimental</span> <span class="n">feature</span> <span class="ow">and</span> <span class="n">unannounced</span> <span class="n">changes</span> <span class="n">are</span> <span class="n">likely</span><span class="o">.</span>
<span class="n">The</span> <span class="n">notebook</span> <span class="n">my_notebook_2</span> <span class="n">was</span> <span class="n">created</span><span class="o">.</span>
</pre></div>
</div>
<p>Here is a recording of the Lightning App:</p>
<br />
<video id="background-video" autoplay loop muted controls poster="https://pl-flash-data.s3.amazonaws.com/assets_lightning/commands_1.png" width="100%">
    <source src="https://pl-flash-data.s3.amazonaws.com/assets_lightning/commands_1.mp4" type="video/mp4" width="100%">
</video>
<br />
<br /></section>
<section id="disconnect-from-the-app">
<h2>5. Disconnect from the App<a class="headerlink" href="#disconnect-from-the-app" title="Permalink to this headline">¶</a></h2>
<p>To exit the App CLI, you need to run <strong>lightning disconnect</strong>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">lightning</span> <span class="n">disconnect</span>
<span class="n">You</span> <span class="n">are</span> <span class="n">disconnected</span> <span class="kn">from</span> <span class="nn">the</span> <span class="n">local</span> <span class="n">Lightning</span> <span class="n">App</span><span class="o">.</span>
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="learn-more">
<h2>Learn more<a class="headerlink" href="#learn-more" title="Permalink to this headline">¶</a></h2>
<div class="display-card-container">
    <div class="row"><p><div class="col-md-6">
    <a href='cli.html'>
    <div class="display-card display-card-hover" style='height:150px'>
            <div class=""></div>
            <h3>1. Develop a CLI with server side code only</h3>
            <p class="body-paragraph">Learn how to develop a simple CLI for your App.</p>
    </div>
    </a>
    
</div></p>
<p><div class="col-md-6">
    <a href='../build_rest_api/index.html'>
    <div class="display-card display-card-hover" style='height:150px'>
            <div class=""></div>
            <h3>Develop a RESTful API</h3>
            <p class="body-paragraph">Learn how to develop an API for your App.</p>
    </div>
    </a>
    
</div></p>
    </div>
</div></section>
</section>


             </article>
             
            </div>
            <footer>
  

  

    <hr>

  

  <div role="contentinfo">
    <p>
        &copy; Copyright Copyright (c) 2021-2022, Lightning-AI et al...

    </p>
  </div>
    
      <div>
        Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
      </div>
     

</footer>

          </div>
        </div>

        <div class="pytorch-content-right" id="pytorch-content-right">
          <div class="pytorch-right-menu" id="pytorch-right-menu">
            <div class="pytorch-side-scroll" id="pytorch-side-scroll-right">
              <ul>
<li><a class="reference internal" href="#">2. Develop a CLI with server and client code execution</a><ul>
<li><a class="reference internal" href="#implement-a-complex-cli">1. Implement a complex CLI</a></li>
<li><a class="reference internal" href="#run-the-app-and-check-the-api-documentation">2. Run the App and check the API documentation</a></li>
<li><a class="reference internal" href="#connect-to-a-running-app">3. Connect to a running App</a></li>
<li><a class="reference internal" href="#execute-a-command">4. Execute a command</a></li>
<li><a class="reference internal" href="#disconnect-from-the-app">5. Disconnect from the App</a></li>
<li><a class="reference internal" href="#learn-more">Learn more</a></li>
</ul>
</li>
</ul>

            </div>
          </div>
        </div>
      </section>
    </div>

  


  

     
       <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
         <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
         <script src="../../_static/jquery.js"></script>
         <script src="../../_static/underscore.js"></script>
         <script src="../../_static/doctools.js"></script>
         <script src="../../_static/clipboard.min.js"></script>
         <script src="../../_static/copybutton.js"></script>
         <script src="../../_static/copybutton.js"></script>
         <script>let toggleHintShow = 'Click to show';</script>
         <script>let toggleHintHide = 'Click to hide';</script>
         <script>let toggleOpenOnPrint = 'true';</script>
         <script src="../../_static/togglebutton.js"></script>
         <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
     

  

  <script type="text/javascript" src="../../_static/js/vendor/popper.min.js"></script>
  <script type="text/javascript" src="../../_static/js/vendor/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/list.js/1.5.0/list.min.js"></script>
  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 
<script script type="text/javascript">
  var collapsedSections = ['App Building Skills', 'Practical Examples', 'Common Workflows', 'Core API Reference', 'Addons API Reference', 'Glossary'];
</script>



  <div id="lightning-ai-footer"></div>

  <div class="cookie-banner-wrapper">
  <div class="container">
    <p class="gdpr-notice">To analyze traffic and optimize your experience, we serve cookies on this site. By clicking or navigating, you agree to allow our usage of cookies. Read PyTorch Lightning's <a href="https://pytorchlightning.ai/privacy-policy">Privacy Policy</a>.</p>
    <img class="close-button" src="../../_static/images/pytorch-x.svg">
  </div>
</div>

  <!-- End Footer -->

  <script type="text/javascript" src="../../_static/js/vendor/anchor.min.js"></script>

  <script type="text/javascript">
    $(document).ready(function() {
      mobileMenu.bind();
      mobileTOC.bind();
      pytorchAnchors.bind();
      sideMenus.bind();
      scrollToAnchor.bind();
      highlightNavigation.bind();
      mainMenuDropdown.bind();
      filterTags.bind();

      // Add class to links that have code blocks, since we cannot create links in code blocks
      $("article.pytorch-article a span.pre").each(function(e) {
        $(this).closest("a").addClass("has-code");
      });
    })
  </script>
 </body>
</html>